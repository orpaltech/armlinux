From 9929fb56f26e1ad7ddd0b426d6ce04bbb325ed82 Mon Sep 17 00:00:00 2001
From: Sergey Suloev <ssuloev@orpaltech.com>
Date: Wed, 12 Feb 2020 19:43:52 +0300
Subject: [PATCH] sun50i-a64: Device tree updates for A64 SoC boards

---
 .../dts/allwinner/sun50i-a64-nanopi-a64.dts   | 24 ++++++++++++++++-
 arch/arm64/boot/dts/allwinner/sun50i-a64.dtsi | 27 +++++++++++++++++++
 2 files changed, 50 insertions(+), 1 deletion(-)

diff --git a/arch/arm64/boot/dts/allwinner/sun50i-a64-nanopi-a64.dts b/arch/arm64/boot/dts/allwinner/sun50i-a64-nanopi-a64.dts
index e58db8a..1bc18aa 100644
--- a/arch/arm64/boot/dts/allwinner/sun50i-a64-nanopi-a64.dts
+++ b/arch/arm64/boot/dts/allwinner/sun50i-a64-nanopi-a64.dts
@@ -14,6 +14,7 @@
 
 	aliases {
 		ethernet0 = &emac;
+		ethernet1 = &rtl8189etv;
 		serial0 = &uart0;
 	};
 
@@ -82,7 +83,7 @@
 	pinctrl-0 = <&rgmii_pins>;
 	phy-mode = "rgmii";
 	phy-handle = <&ext_rgmii_phy>;
-	phy-supply = <&reg_dcdc1>;
+	phy-supply = <&reg_dc1sw>;
 	status = "okay";
 };
 
@@ -102,6 +103,11 @@
 	bias-pull-up;
 };
 
+&i2c2 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&i2c2_pins>;
+};
+
 &mdio {
 	ext_rgmii_phy: ethernet-phy@1 {
 		compatible = "ethernet-phy-ieee802.3-c22";
@@ -145,6 +151,11 @@
 	status = "okay";
 };
 
+&r_i2c {
+	pinctrl-names = "default";
+	pinctrl-0 = <&r_i2c_pl89_pins>;
+};
+
 &r_rsb {
 	status = "okay";
 
@@ -162,6 +173,13 @@
 	status = "okay";
 };
 
+&reg_aldo1 {
+	regulator-always-on;
+	regulator-min-microvolt = <3300000>;
+	regulator-max-microvolt = <3300000>;
+	regulator-name = "vcc-pe";
+};
+
 &reg_aldo2 {
 	regulator-always-on;
 	regulator-min-microvolt = <1800000>;
@@ -206,6 +224,10 @@
 	regulator-name = "vdd-sys";
 };
 
+&reg_dc1sw {
+	regulator-name = "vcc-phy";
+};
+
 &reg_dldo1 {
 	regulator-always-on;
 	regulator-min-microvolt = <3300000>;
diff --git a/arch/arm64/boot/dts/allwinner/sun50i-a64.dtsi b/arch/arm64/boot/dts/allwinner/sun50i-a64.dtsi
index 862b47d..5953638 100644
--- a/arch/arm64/boot/dts/allwinner/sun50i-a64.dtsi
+++ b/arch/arm64/boot/dts/allwinner/sun50i-a64.dtsi
@@ -157,6 +157,7 @@
 	sound_spdif {
 		compatible = "simple-audio-card";
 		simple-audio-card,name = "On-board SPDIF";
+		status = "disabled";
 
 		simple-audio-card,cpu {
 			sound-dai = <&spdif>;
@@ -671,6 +672,32 @@
 				function = "i2c1";
 			};
 
+			i2c2_pins: i2c2-pins {
+				pins = "PE14", "PE15";
+				function = "i2c2";
+			};
+
+			i2s0_pins_mclk: i2s0-pins-mclk {
+				pins = "PB3";
+				function = "i2s0";
+			};
+			i2s0_pins_bclk: i2s0-pins-bclk {
+				pins = "PB5";
+				function = "i2s0";
+			};
+			i2s0_pins_lrck: i2s0-pins-lrck {
+				pins = "PB4";
+				function = "i2s0";
+			};
+			i2s0_pins_do0: i2s0-pins-do0 {
+				pins = "PB6";
+				function = "i2s0";
+			};
+			i2s0_pins_di: i2s0-pins-di {
+				pins = "PB7";
+				function = "i2s0";
+			};
+
 			/omit-if-no-ref/
 			lcd_rgb666_pins: lcd-rgb666-pins {
 				pins = "PD0", "PD1", "PD2", "PD3", "PD4",
-- 
2.17.1

